<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="admin-panel/admin-style.css">
    <link rel="stylesheet" href="admin-style.css">
    <script type="text/javascript" defer src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
    <title>Admin Dashboard</title>
    <script>
        fetch("/admin-panel/data.json")
            .then((response) => response.json())
            .then((data) => {
                let folders = data.folders;
                console.log(folders);
                console.log(data);
                const frame = document.getElementById("files-page").getElementsByClassName("file-list")[0];
                for (const element in data) {
                    data[element].forEach(item => {
                        console.log(element);
                        let newDiv = document.createElement("div");
                        newDiv.className = "file-item";
                        newDiv.innerHTML = `<span> ${item.name}</span>
                                <div class="file-actions">
                                <button class="btn btn-small btn-primary">Descargar</button>
                                <button class="btn btn-small btn-primary" >Editar</button>
                                <button class="btn btn-small btn-primary">Borrar</button>`;
                        frame.appendChild(newDiv);
                    });
                }
            })
            .catch((error) => console.error("Error loading JSON file", error));
    </script>
</head>

<body>
    <div class="overlay" id="overlay"></div>
    <nav class="navbar">
        <button id="menu-toggle">‚ò∞</button>
        <div class="navbar-brand">Panel de administrador</div>
        <button class="logout-btn">Cerrar sesi√≥n</button>
    </nav>

    <div class="sidebar" id="sidebar">
        <div class="nav-item active" data-page="info">
            <span>üìä</span> Info del sistema
        </div>
        <div class="nav-item" data-page="config">
            <span>‚öôÔ∏è</span> Configuraci√≥n
        </div>
        <div class="nav-item" data-page="files">
            <span>üìÅ</span> Gesti√≥n de archivos
        </div>
    </div>


    <main class="main-content">
        <!----------------- Info Page ----------------->
        <div id="info-page">
            <div class="card">
                <h2>Informaci√≥n del sistema</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <h3>SSID Punto de Acceso</h3>
                        <p id="device-name">!{AP_SSID}</p>
                    </div>
                    <div class="info-item">
                        <h3>Direcci√≥n IP del Servidor</h3>
                        <p id="firmware-version">!{SERV_IP}</p>
                    </div>
                    <div class="info-item">
                        <h3>Tiempo activo</h3>
                        <p id="uptime">2 days, 3 hours</p>
                    </div>
                    <div class="info-item">
                        <h3>Hosts conectados</h3>
                        <p id="free-memory">!{TOTAL_HOST}</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>Estado de la red</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <h3>WiFi SSID</h3>
                        <p id="wifi-ssid">!{WIFI_SSID}</p>
                    </div>
                    <div class="info-item">
                        <h3>Direcci√≥n IP de cliente</h3>
                        <p id="ip-address">!{CLIENT_IP}</p>
                    </div>
                    <div class="info-item">
                        <h3>Estado</h3>
                        <p id="signal-strength">!{WIFI_STATUS}</p>
                    </div>
                    <div class="info-item">
                        <h3>MAC Address</h3>
                        <p id="mac-address">!{SERV_MAC}</p>
                    </div>
                </div>
            </div>
        </div>

        <!----------------- Configuration Page ----------------->
        <div id="config-page" style="display: none;">
            <div class="card">
                <h2>Configuraci√≥n del punto de acceso</h2>
                <form id="network-config">
                    <div class="form-group">
                        <label>Nombre punto de acceso</label>
                        <input type="text" name="ap-ssid" placeholder="Entrar el nombre del punto de acceso">
                    </div>
                    <div class="form-group">
                        <label>Direcci√≥n IP</label>
                        <input type="text" name="ap-address" placeholder="Entrar la direcci√≥n IP deseada">
                    </div>
                    <div class="form-group">
                        <label>Clave WiFi</label>
                        <input type="text" name="ap-password" placeholder="Entrar la clave del punto de acceso">
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar configuraci√≥n</button>
                </form>
            </div>

            <div class="card">
                <h2>Configuraci√≥n de la wifi</h2>
                <form id="network-config">
                    <div class="form-group">
                        <label>WiFi SSID</label>
                        <input type="text" name="wifi-ssid" placeholder="Entrar el nombre de la WiFi">
                    </div>
                    <div class="form-group">
                        <label>Clave WiFi</label>
                        <input type="text" name="wifi-password" placeholder="Entrar la clave de la WiFi">
                    </div>
                    <div class="form-group">
                        <label>Nombre del equipo</label>
                        <input type="text" name="deviceName" placeholder="Entrar el nombre deseado">
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar configuraci√≥n</button>
                </form>
            </div>

            <div class="card">
                <h2>Configuraci√≥n del sistema</h2>
                <form id="system-config">
                    <div class="form-group">
                        <label>Tiempo de espera sesi√≥n (segundos)</label>
                        <input type="number" name="timeout" placeholder="Introduzca el tiempo de espera en segundos">
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar configuraci√≥n</button>
                </form>
            </div>
            
        </div>

        <!----------------- File man Page ----------------->
        <div id="files-page" style="display: none;">
            <div class="card">
                <h2>Gesti√≥n de archivos</h2>
                <label class="upload-area" for="file-upload">
                    <div class="upload-icon">üìÅ</div>
                    <div class="upload-message">
                        <p>Suelte los archivos aqu√≠ o haga clic para cargarlos</p>
                        <input type="file" id="file-upload" multiple>
                    </div>
                </label>
                <div id="folders-container"></div>
                <div class="file-list">
                    <div class="file-item">
                        <span>!{FILE_NAME}</span>
                        <div class="file-actions">
                            <button class="btn btn-small btn-primary">Descargar</button>
                            <button class="btn btn-small btn-primary">Editar</button>
                            <button class="btn btn-small btn-primary">Borrar</button>
                        </div>
                    </div>
                </div>
                </div>
                
            </div>
        </div>
    </main>

    <script src="admin-app.js" type="text/javascript">
        fetch("/data.json")
            .then((response) => response.json())
            .then((data) => {
                console.log(data);
            });
        loadFileData();
    </script>
    <script src="admin-panel/admin-app.js">
        loadFileData();
        /*
                <div class="file-list">
                    <div class="file-item">
                        <span>!{FILE_NAME}</span>
                        <div class="file-actions">
                            <button class="btn btn-small btn-primary">Download</button>
                            <button class="btn btn-small btn-primary">Edit</button>
                            <button class="btn btn-small btn-primary">Delete</button>
                        </div>
                    </div>
                </div>
        */
    </script>
</body>

</html>